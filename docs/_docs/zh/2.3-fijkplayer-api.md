---
title: 播放器接口
permalink: /docs/zh/fijkplayer-api.html
key: docs-fijkplayer-api
---


在 [Hello World](/docs/zh/hello-world.html) 一节中，我们已经通过一个简单的 Demo 实现了最基础的播放器使用。  
本节将对播放器接口进行完整地、系统地介绍。 如果你还尚未阅读 [播放器状态](/docs/zh/fijkstate.html) 一节中的内容，请先跳转过去进行阅读。
了解播放器状态的内容将能让你对播放器接口的调用有更加清晰的认识。

## FijkPlayer 概念

这里有必要再次啰嗦一番，`FijkPlayer` 是库 fijkplayer 中的一个 dart class。在这个 FijkPlayer 背后到底存在什么， 赋予了它媒体播放的能力？

FijkPlayer 是对 ijkplayer 的 Flutter 封装。 FijkPlayer 与 native 中的 ijkplayer 一一对应。
同一个播放器存在与多个语言环境中并且一一对应。

<div align="center">  
<p><strong>C 环境中的 FFPlayer 或者 IjkMediaPlayer</strong> </p>
<p><strong>java 环境中的 IjkMediaPlayer 或 objc 环境中的 IJKFFMediaPlayer</strong></p>
<p><strong>dart 环境中的 FijkPlayer </strong></p>
</div>

这三层播放器封装通过语言间通讯接口进行通讯，一一对应。其中 C 语言层的 `FFPlayer` 负责最核心的播放器实现，启动多个不同的播放器线程，读取文件、网络数据，解码等。其他两层都是是接口封装，方便在更高级的语言层面使用播放器。  

C 层的播放器自己进行内存管理，而其他两层则都依赖垃圾回收机制进行内存管理。在整个 java `IjkMediaPlayer` 、 objc `IJKFFMediaPlayer` 、 dart `FijkPlayer` 对象的生命周期中，都只关联一个 C 层的播放器结构，并且在垃圾回收释放内存前，需要显示调用接口释放掉 C 层中的内存和其他资源。
这种单一的对应关系也避免一下概念上的错误，有助于对项目、代码逻辑的理解。




## 播放器接口  

### 创建播放器

```dart
FijkPlayer fplayer = FijkPlayer();
```
播放器 `fplayer` 创建后，java/objc 层的播放器以及 C 层的播放器也随之一起完成对象创建或 struct 内存分配。终其一生，这个 `fplayer` 就只能对应这一个 C 层的 `FFPlayer`。 并且在使用完成之后， `fplayer`  必须释放其内部 `FFPlayer` 所占用的资源。

### 销毁
```dart
fplayer.release();
```
release 方法内部会根据当前的播放器状态 FijkState 判断是否需要调用 `stop` 接口。 所以可以在播放器的任何状态下调用 `release` 接口进行资源释放。

### 设置资源
```dart
fplayer.setDataSource("http://samplevideo.com/sample.flv", autoPlay: true);
```
设置播放器播放资源，接口内部会尝试自动判断资源类型，比如网络资源，本地文件资源等。
也可以通过可选参数 `type` 强制指定资源类型。  
可选参数 `autoPlay` 设置为 true 时会在设置资源后调用 `prepareAsync` 和 `start` 接口自动播放。

### 播放控制

* 异步加载
* 开始
* 暂停
* 停止
* 重置
* 调节音量
* 进度跳转
* 设置播放循环
* 设置播放倍速

### 设置播放器属性
## 获取播放器信息
